{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Testing System</title>
  <style>
    /* General Styles */
    body {
      background: radial-gradient(circle, #2c3e50, #000);
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      color: #ffffff;
      overflow-x: hidden;
    }

    /* Navbar */
    .navbar-brand {
      font-size: 36px;
      font-weight: bold;
      color: #ffffff !important;
      transition: color 0.3s;
    }

    .navbar-brand:hover {
      color: #4caf50;
    }

    .navbar-nav .nav-link {
      font-size: 16px;
      color: #f0f0f0;
      margin-right: 15px;
      transition: color 0.3s, transform 0.3s;
    }

    .navbar-nav .nav-link:hover {
      color: #4caf50;
      transform: scale(1.1);
    }

    .dropdown-menu {
      background-color: #333;
      border: none;
    }

    .dropdown-menu .dropdown-item {
      color: #4caf50;
      font-size: 20px;
      transition: background-color 0.3s, transform 0.3s;
    }

    .dropdown-menu .dropdown-item:hover {
      background-color: #4caf50;
      transform: translateX(5px);
    }

    /* Hero Section */
    #container {
      text-align: center;
      padding: 200px 50px;
      /* background-image: url('static\images\hero.jpg'); Replace with the actual path to your image */
      background-size: cover; /* Ensures the image covers the entire div */
      background-position: center; /* Centers the image */
      background-repeat: no-repeat; /* Prevents the image from repeating */
      border-radius: 15px; /* Optional: Adds rounded corners */
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); /* Optional: Adds a shadow for better visibility */
      color: #ffffff; /* Ensures text remains readable */
    }

    #container h1 {
      font-size: 50px;
      font-weight: bold;
      color: #4caf50;
      margin-bottom: 20px;
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7); /* Optional: Adds text shadow for better visibility */
    }

    #container h2 {
      font-size: 25px;
      font-weight: bold;
      color: #ffffff;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7); /* Optional: Adds text shadow for better visibility */
    }
    /* Intro Section Styles */
.intro {
  background-color: #f8f9fa; /* Light background for contrast */
  color: #333; /* Default font color */
  padding: 60px 20px; /* Section padding */
}

.intro-feature {
  text-align: center; /* Center-align content */
  margin-bottom: 30px; /* Spacing between features */
}

.intro-icon {
  font-size: 50px; /* Icon size */
  color: #4caf50; /* Icon color */
  margin-bottom: 20px; /* Space below the icon */
}

.intro-content h5 {
  font-size: 22px; /* Font size for headings */
  font-weight: bold; /* Make headings bold */
  color: #4caf50; /* Heading color */
  margin-bottom: 10px; /* Space below the heading */
}

.intro-content p {
  font-size: 16px; /* Font size for paragraphs */
  color: #666; /* Paragraph text color */
  line-height: 1.8; /* Improve readability */
}


    /* Profile Card */
    .card {
      background: linear-gradient(145deg, #1e90ff, #00bfff);
      border: none;
      border-radius: 20px;
      color: #fff;
      padding: 25px;
      margin: 20px auto;
      max-width: 500px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.7);
    }

    .card h2 {
      font-size: 22px;
      margin-bottom: 10px;
    }

    /* Additional Information Section */
    .card1 {
      background: rgba(255,255,255,0);
      border: none;
      border-radius: 0;
      padding: 40px;
      color: #ffffff;
      width: 100vw;
      height: 50vh;
      box-shadow: none;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card1 p {
      font-size: 18px;
      line-height: 1.8;
      color: #ffffff;
      margin: 0 20px;
      text-align: justify;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 20px;
      background: #000;
      color: #4caf50;
      font-size: 14px;
    }

    /* Decorative Squares */
    .square {
      position: absolute;
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
      z-index: -1;
      animation: moveSquare 10s linear infinite;
    }

    .square:nth-child(1) {
      top: 20%;
      left: 10%;
      width: 100px;
      height: 100px;
      animation-duration: 15s;
    }

    .square:nth-child(2) {
      top: 40%;
      right: 15%;
      width: 80px;
      height: 80px;
      animation-duration: 12s;
    }

    .square:nth-child(3) {
      bottom: 10%;
      left: 20%;
      width: 120px;
      height: 120px;
      animation-duration: 18s;
    }

    .square:nth-child(4) {
      bottom: 30%;
      right: 25%;
      width: 90px;
      height: 90px;
      animation-duration: 14s;
    }

    .square:nth-child(5) {
      top: 5%;
      right: 5%;
      width: 70px;
      height: 70px;
      animation-duration: 10s;
    }

    .square:nth-child(6) {
      bottom: 15%;
      left: 5%;
      width: 50px;
      height: 50px;
      animation-duration: 8s;
    }

    /* Moving Squares Animation */
    @keyframes moveSquare {
      0% {
        transform: translate(0px, 0px) rotate(0deg);
      }
      50% {
        transform: translate(30px, -30px) rotate(45deg);
      }
      100% {
        transform: translate(0px, 0px) rotate(0deg);
      }
    }

    /* Chatbot Icon Styles */
    .chat-icon {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #4CAF50;
      color: white;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      text-align: center;
      line-height: 60px;
      font-size: 30px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      z-index: 1000; /* Ensure it's on top of other elements */
    }

    .chat-icon:hover {
      background-color: #3e8e41;
    }

    /* Chatbot container Styles */
    .chat-container {
        position: fixed;
        bottom: 80px;
        right: 20px;
        width: 90%;
        max-width: 600px;
        background: rgba(0, 0, 0, 0.8);
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
        overflow: hidden;
        display: none; /* Initially hidden */
        flex-direction: column;
        z-index: 1000;
    }

    .chat-header {
        background: #00ffb3;
        padding: 20px;
        text-align: center;
        font-size: 1.5em;
        color: #000;
        font-weight: bold;
    }

    .chat-box {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
        overflow-x: hidden;
        display: flex;
        flex-direction: column;
        gap: 15px;
        max-height: 60vh;
    }

    .message {
        max-width: 70%;
        padding: 10px 15px;
        border-radius: 15px;
        line-height: 1.4;
        box-shadow: 0 4px 12px rgba(0, 255, 255, 0.2);
        position: relative;
        white-space: pre-wrap;
    }

    .user-message {
        align-self: flex-end;
        background: #1e1e1e;
        color: #00ffb3;
        border-bottom-right-radius: 0;
    }

    .bot-message {
        align-self: flex-start;
        background: #333;
        color: #fff;
        border-bottom-left-radius: 0;
    }

    .input-area {
        display: flex;
        padding: 15px;
        background: #222;
        border-top: 1px solid #333;
    }

    #user-input {
        flex: 1;
        padding: 10px 15px;
        border: 1px solid #444;
        background: #000;
        color: #fff;
        border-radius: 8px;
        margin-right: 10px;
        outline: none;
    }

    #send-button {
        background: #00ffb3;
        color: #000;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    #send-button:hover {
        background: #00e6a1;
    }

    /* Processing animation */
    @keyframes dot-flash {
        0% { content: "Processing"; }
        33% { content: "Processing."; }
        66% { content: "Processing.."; }
        100% { content: "Processing..."; }
    }

    .processing-message::after {
        content: "Processing";
        display: inline-block;
        animation: dot-flash 1.5s infinite;
    }

  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet"
  />
</head>
<body>
  <!-- Decorative Squares -->
  <div class="square"></div>
  <div class="square"></div>
  <div class="square"></div>
  <div class="square"></div>
  <div class="square"></div>
  <div class="square"></div>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Online Testing System</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'user:aboutUs' %}">About Us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'user:profile' %}">Update Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'user:test_history' %}">Test History</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Subjects
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'user:subject1' %}">DBMS</a></li>
              <li><a class="dropdown-item" href="{% url 'user:subject2' %}">OS</a></li>
              <li><a class="dropdown-item" href="{% url 'user:subject3' %}">CN</a></li>
              <li><a class="dropdown-item" href="{% url 'user:logout' %}">Logout</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Content -->
  <div id="container" style="background-image: url('{% static "images/hero.jpg" %}');">
    <h1>Test With Ease - Go Online</h1>
    {% for ele in user_data %}
        <h2>Welcome {{ ele.name }}!!</h2>
    {% endfor %}
</div>
<section class="intro section-padding">
  <div class="container">
      <div class="row">
          <div class="col-md-4 intro-feature">
              <div class="intro-icon">
                  <span data-icon="" class="icon"></span>
              </div>
              <div class="intro-content">
                  <h5>Easy Customization</h5>
                  <p>Easily customize the system to test fundamental concepts of any subject. Tailor the question types and difficulty levels to suit the learning objectives.</p>
              </div>
          </div>
          <div class="col-md-4 intro-feature">
              <div class="intro-icon">
                  <span data-icon="" class="icon"></span>
              </div>
              <div class="intro-content">
                  <h5>Interactive Question Formats</h5>
                  <p>Provide diverse question formats like multiple-choice, short-answer, and true/false to effectively assess the understanding of basic concepts.</p>
              </div>
          </div>
          <div class="col-md-4 intro-feature">
              <div class="intro-icon">
                  <span data-icon="" class="icon"></span>
              </div>
              <div class="intro-content last">
                  <h5>Instant Feedback</h5>
                  <p>Offer instant feedback to test-takers, helping them understand their strengths and areas for improvement as they progress through the test.</p>
              </div>
          </div>
      </div>
  </div>
</section>



  <div class="card1" style="background-image: url('{% static "images\testimonials-bg.jpg" %}');">
    <main>
      <p>Welcome to the Online Testing System, where we strive to provide a seamless and efficient platform for
        conducting online tests and assessments. Our mission is to make the testing process easy, secure, and
        user-friendly for both educators and students.</p>

      <p>With cutting-edge technology and a user-centric approach, we aim to revolutionize the way examinations are
        conducted. Our platform offers features such as real-time monitoring, secure authentication, and detailed
        result analysis to ensure a comprehensive testing experience.</p>

      <p>Whether you are an educational institution, a recruitment agency, or an individual educator, our Online
        Testing System is designed to meet your diverse assessment needs. We believe in the power of education and
        aim to contribute to the growth and success of individuals and organizations through our innovative
        platform.</p>
    </main>
  </div>

  <footer>
    © 2024 Online Testing System. All rights reserved.
  </footer>

  <!-- Chatbot Icon -->
  <div class="chat-icon" id="chat-icon">
    <i class="fas fa-comment-dots"></i>
  </div>

    <!-- Chatbot Container -->
    <div class="chat-container" id="chat-container">
        <div class="chat-header">AI ChatBot Support</div>
        <div class="chat-box" id="chat-box">
            <div class="bot-message message">Ask me any thing!!</div>
        </div>

        <div class="input-area">
            <input type="text" id="user-input" placeholder="Type your message here...">
            <button id="send-button">Send</button>
        </div>
    </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const chatIcon = document.getElementById('chat-icon');
    const chatContainer = document.getElementById('chat-container');
    const chatBox = document.getElementById("chat-box");
    const userInput = document.getElementById("user-input");
    const sendButton = document.getElementById("send-button");

    chatIcon.addEventListener('click', () => {
      chatContainer.style.display = chatContainer.style.display === 'block' ? 'none' : 'block';
    });

    sendButton.addEventListener("click", function () {
        const message = userInput.value.trim();
        if (message !== "") {
            // Add user message to chat
            const userMessage = document.createElement('div');
            userMessage.classList.add('user-message', 'message');
            userMessage.textContent = message;
            chatBox.appendChild(userMessage);
            userInput.value = "";

            // Show animated "Processing..." message
            const processingMessage = document.createElement('div');
            processingMessage.classList.add('bot-message', 'message', 'processing-message');
            chatBox.appendChild(processingMessage);
            chatBox.scrollTop = chatBox.scrollHeight;

            // Get the CSRF token from the cookie
            function getCookie(name) {
                let cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                        const cookie = cookies[i].trim();
                        // Does this cookie string begin with the name we want?
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
            const csrftoken = getCookie('csrftoken');

            // Send request to backend
            fetch("{% url 'user:ChatBot' %}", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                    'X-CSRFToken': csrftoken  // Include the CSRF token in the header
                },
                body: `user_input=${encodeURIComponent(message)}`
            })
            .then(response => response.json())
            .then(data => {
                // Remove processing message
                chatBox.removeChild(processingMessage);

                // Create bot response message
                const botMessage = document.createElement('div');
                botMessage.classList.add('bot-message', 'message');
                chatBox.appendChild(botMessage);
                chatBox.scrollTop = chatBox.scrollHeight;

                let responseText = data.response;
                let index = 0;
                let formattedText = "";

                function typeNextCharacter() {
                    if (index < responseText.length) {
                        formattedText += responseText[index];
                        botMessage.innerHTML = formattedText
                            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                            .replace(/\*(.*?)\*/g, '<em>$1</em>')
                            .replace(/__(.*?)__/g, '<u>$1</u>')
                            .replace(/~~(.*?)~~/g, '<s>$1</s>')
                            .replace(/```([\s\S]*?)```/g, '<pre>$1</pre>')
                            .replace(/`([^`]+)`/g, '<code>$1</code>');

                        chatBox.scrollTop = chatBox.scrollHeight;
                        index++;
                        setTimeout(typeNextCharacter, ); // Typing speed: 20ms per character
                    }
                }

                typeNextCharacter(); // Start typing effect
            })
            .catch(error => {
                console.error("Error:", error);
            });
        }
    });

    userInput.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            sendButton.click();
        }
    });
  </script>
</body>
</html>